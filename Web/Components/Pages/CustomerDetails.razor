@page "/Customers/{Id:int}"
@using Domain.Entities
@using Application.Services.Customers

@inject ICustomerService CustomerService 
@inject NavigationManager NavigationManager

<PageTitle>Customer Details</PageTitle>

<!-- MudContainer: Responsive container with max-width constraint -->
<MudContainer MaxWidth="MaxWidth.Medium" Class="py-8">
    
    <!-- Header Section with Title and Action Buttons -->
    <div class="d-flex justify-content-between align-items-center mb-6">
        <MudText Typo="Typo.h4" Class="font-weight-bold">Customer Details</MudText>
        <div class="d-flex gap-2">
            <!-- Edit Button -->
           
            
            <!-- Back to List Button -->
            <MudButton 
                Variant="Variant.Outlined" 
                Color="Color.Default" 
                StartIcon="@Icons.Material.Filled.ArrowBack"
                Href="/Customers">
                Back to List
            </MudButton>
        </div>
    </div>

    @if (customer != null)
    {
        <!-- MudCard: Main container with elevation shadow -->
        <MudCard Class="elevation-1">
            <MudCardContent>
                <!-- Customer Information Grid -->
                <MudGrid Spacing="3">
                    
                    <!-- ID Field -->
                    <MudItem xs="12" sm="6">
                        <div>
                            <MudText Typo="Typo.subtitle2" Color="Color.Primary">Customer ID</MudText>
                            <MudText Typo="Typo.body1" Class="font-weight-bold">@customer.Id</MudText>
                        </div>
                    </MudItem>

                    <!-- Name Field -->
                    <MudItem xs="12" sm="6">
                        <div>
                            <MudText Typo="Typo.subtitle2" Color="Color.Primary">Full Name</MudText>
                            <MudText Typo="Typo.body1" Class="font-weight-bold">@customer.Name</MudText>
                        </div>
                    </MudItem>

                    <!-- Email Field -->
                    <MudItem xs="12" sm="6">
                        <div>
                            <MudText Typo="Typo.subtitle2" Color="Color.Primary">Email Address</MudText>
                            <MudLink Href="@($"mailto:{customer.Email}")" Target="_blank">
                                @customer.Email
                            </MudLink>
                        </div>
                    </MudItem>

                    <!-- Phone Field -->
                    <MudItem xs="12" sm="6">
                        <div>
                            <MudText Typo="Typo.subtitle2" Color="Color.Primary">Phone Number</MudText>
                            <MudLink Href="@($"tel:{customer.Phone}")" Target="_blank">
                                @customer.Phone
                            </MudLink>
                        </div>
                    </MudItem>

                    <!-- Address Field -->
                    <MudItem xs="12" sm="6">
                        <div>
                            <MudText Typo="Typo.subtitle2" Color="Color.Primary">Street Address</MudText>
                            <MudText Typo="Typo.body1">@customer.Address</MudText>
                        </div>
                    </MudItem>

                    <!-- City Field -->
                    <MudItem xs="12" sm="6">
                        <div>
                            <MudText Typo="Typo.subtitle2" Color="Color.Primary">City</MudText>
                            <MudText Typo="Typo.body1">@customer.City</MudText>
                        </div>
                    </MudItem>

                    <!-- Created At Field -->
                    <MudItem xs="12">
                        <div>
                            <MudText Typo="Typo.subtitle2" Color="Color.Primary">Account Created</MudText>
                            <MudText Typo="Typo.body1">@customer.CreatedAt.ToString("dddd, MMMM dd, yyyy HH:mm:ss")</MudText>
                        </div>
                    </MudItem>

                </MudGrid>
            </MudCardContent>
        </MudCard>
        }
        else
        {
            <MudText Typo="Typo.body1" Color="Color.Error">Customer not found.</MudText>
        }

</MudContainer>


@code {
    [Parameter]
    public int id { get; set; }

    private Customer? customer;

    protected override void OnInitialized()
    {
        // Load customer details by id
        customer = CustomerService.GetCustomerById(id);
    }
}